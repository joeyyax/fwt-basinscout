/**
 * Section layout styles
 * Full-viewport sections with container queries and layout structure
 */

/* Main content container with full viewport dimensions */
main#sections-container {
  height: calc(100vh - 80px); /* Account for header height */
  height: calc(100dvh - 80px);
  width: 100vw;
  width: 100dvw;
  position: relative;
  z-index: 1;
  container-type: size;
  overflow: visible; /* Ensure content can extend beyond boundaries */
}

/* Sections container */
#sections-container {
  height: calc(100vh - 80px); /* Account for header height */
  height: calc(100dvh - 80px);
  width: 100vw;
  width: 100dvw;
  overflow: visible; /* Allow content to extend beyond boundaries */
  position: relative;
  container-type: size;
}

/* Section layout with balanced container queries */
.section {
  height: calc(100vh - 80px); /* Account for header height */
  height: calc(100dvh - 80px);
  width: 100vw;
  width: 100dvw;
  position: absolute;
  top: 0;
  left: 0;
  padding: 2rem;
  container-type: size; /* Enable both dimensions for container queries */

  /* Performance optimizations */
  contain: layout style paint; /* Remove size containment to prevent clipping */
  transform: var(--gpu-acceleration, translateZ(0));
  backface-visibility: hidden;
  will-change: transform, opacity;
}

/* Section visibility states */
.section.active {
  @apply z-10 opacity-100 pointer-events-auto;
}

.section.inactive {
  @apply z-0 opacity-0 pointer-events-none; /* Prevent inactive sections from blocking clicks */
}

/* Balanced grid container with reasonable spacing */
.container {
  /* Use Tailwind's container centering behavior */
  max-width: 1400px;
  margin-left: auto;
  margin-right: auto;
  container-type: size;
}

/* Section containers get grid layout while maintaining centering */
.section .container {
  @apply w-full h-full grid gap-2 lg:gap-12;

  grid-template-rows: auto 1fr;
  grid-template-areas:
    'title'
    'content';
}

/* Enhanced title area with container queries */
.title-wrapper {
  grid-area: title;
  width: 100%;
  container-type: inline-size;
  overflow: visible; /* Allow title animations to extend beyond boundaries */

  /* Container-based alignment */
  @container (min-width: 768px) {
    display: flex;
    align-items: center;
    min-height: fit-content;
  }

  /* Title animation optimizations */
  h1 {
    will-change: transform, opacity, font-size;
    transform: var(--gpu-acceleration, translateZ(0));
    backface-visibility: hidden;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    @container (min-width: 768px) {
      /* Enhanced performance for larger text on bigger screens */
    }
  }
}

/* Section-specific background management */
.section[data-background] {
  /* Background handled by background system */
  /* Ensure smooth background transitions are handled by GSAP */
  transition: none; /* Let GSAP handle background transitions */
}

/* Special section types */
.section-intro {
  /* Intro section specific styles */
}

.section-map {
  /* Map section specific styles - uses grid layout */
  .content-wrapper {
    display: block; /* Switch from flex to block for grid containers */
    margin-top: 0; /* Remove margin for grid layouts */
  }
}
