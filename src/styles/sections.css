/**
 * Section component styles
 * Enhanced for Tailwind CSS v4.1 with performance optimizations
 */

/* Section-level optimizations using Tailwind utilities */
.section {
  @apply absolute top-0 left-0 w-full h-full z-[1] bg-transparent;

  contain: layout style paint; /* Remove size containment to prevent clipping */
  /* Hardware acceleration for section transitions */
  transform: var(--gpu-acceleration, translateZ(0));
  backface-visibility: hidden;
  /* Optimize for frequent repaints during GSAP animations */
  will-change: transform, opacity;
}

/* Section visibility states using Tailwind utilities */
.section.active {
  @apply z-10 opacity-100 pointer-events-auto;
}

.section.inactive {
  @apply z-0 opacity-0 pointer-events-none; /* Prevent inactive sections from blocking clicks */
}

/* Enhanced title animation optimizations */
.section .title-wrapper {
  /* Container-level performance optimizations - remove containment to prevent clipping */
  /* contain: layout style paint; */

  h1 {
    will-change: transform, opacity, font-size;
    transform: var(--gpu-acceleration, translateZ(0));
    backface-visibility: hidden;
    /* Optimize text rendering during animations */
    text-rendering: optimizeSpeed;
    /* Prevent font smoothing changes during scale animations */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    /* Container query optimizations for different screen sizes */
    @container (min-width: 768px) {
      /* Enhanced performance for larger text on bigger screens - remove containment */
      /* contain: layout style; */
    }
  }
}

/* Section-specific background management */
.section[data-background] {
  /* Ensure smooth background transitions are handled by GSAP */
  transition: none; /* Let GSAP handle background transitions */
}

/* Special section types */
.section-intro {
  /* Intro section specific styles */
}

.section-map {
  /* Map section specific styles - uses grid layout */
  .content-wrapper {
    display: block; /* Switch from flex to block for grid containers */
    margin-top: 0; /* Remove margin for grid layouts */
  }
}

.section-results {
  /* Results section specific styles */
}

/* Enhanced content animation optimizations within sections */
.section .prose {
  /* Container-level performance for prose content - remove containment to prevent clipping */
  /* contain: layout style; */

  * {
    will-change: transform, opacity;
    transform: var(--gpu-acceleration, translateZ(0));
    backface-visibility: hidden;
    /* Optimize for staggered animations */
    animation-fill-mode: var(--animation-fill-mode, both);
  }

  /* Optimize nested elements for cascade animations */
  * {
    backface-visibility: hidden;
  }
}

/* Performance optimizations for reduced motion */
@media (prefers-reduced-motion: reduce) {
  .section,
  .section .title-wrapper h1,
  .section .prose * {
    will-change: auto;
    transform: none;
    transition-duration: 0.01ms !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .section .title-wrapper h1 {
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
  }

  .section .prose h3,
  .section .prose p {
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.6);
  }
}
